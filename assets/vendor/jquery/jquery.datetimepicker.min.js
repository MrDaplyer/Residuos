var datetimepickerFactory=function(e){"use strict";var t={i18n:{en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},de:{months:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeekShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayOfWeek:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeekShort:["zo","ma","di","wo","do","vr","za"],dayOfWeek:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeekShort:["Dom","Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b"],dayOfWeek:["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"]}},ownerDocument:document,contentWindow:window,value:"",rtl:!1,format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnTimeSelect:!0,closeOnWithoutClick:!0,closeOnInputClick:!0,openOnFocus:!0,timepicker:!0,datepicker:!0,weeks:!1,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,minDateTime:!1,maxDateTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",touchMovedThreshold:5,onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onGetWeekOfYear:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,prevButton:!0,nextButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,monthStart:0,monthEnd:11,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],highlightedDates:[],highlightedPeriods:[],allowDates:[],allowDateRe:null,disabledDates:[],disabledWeekDays:[],yearOffset:0,beforeShowDay:null,enterLikeTab:!0,showApplyButton:!1,insideParent:!1},o=null,n=null,a="en",i={meridiem:["AM","PM"]},r=function(){var r=t.i18n[a],s={days:r.dayOfWeek,daysShort:r.dayOfWeekShort,months:r.months,monthsShort:e.map(r.months,function(e){return e.substring(0,3)})};"function"==typeof DateFormatter&&(o=n=new DateFormatter({dateSettings:e.extend({},i,s)}))},s={moment:{default_options:{format:"YYYY/MM/DD HH:mm",formatDate:"YYYY/MM/DD",formatTime:"HH:mm"},formatter:{parseDate:function(e,t){if(l(t))return n.parseDate(e,t);var o=moment(e,t);return!!o.isValid()&&o.toDate()},formatDate:function(e,t){return l(t)?n.formatDate(e,t):moment(e).format(t)},formatMask:function(e){return e.replace(/Y{4}/g,"9999").replace(/Y{2}/g,"99").replace(/M{2}/g,"19").replace(/D{2}/g,"39").replace(/H{2}/g,"29").replace(/m{2}/g,"59").replace(/s{2}/g,"59")}}}};e.datetimepicker={setLocale:function(e){var o=t.i18n[e]?e:"en";a!==o&&(a=o,r())},setDateFormatter:function(n){if("string"==typeof n&&s.hasOwnProperty(n)){var a=s[n];e.extend(t,a.default_options),o=a.formatter}else o=n}};var d={RFC_2822:"D, d M Y H:i:s O",ATOM:"Y-m-dTH:i:sP",ISO_8601:"Y-m-dTH:i:sO",RFC_822:"D, d M y H:i:s O",RFC_850:"l, d-M-y H:i:s T",RFC_1036:"D, d M y H:i:s O",RFC_1123:"D, d M Y H:i:s O",RSS:"D, d M Y H:i:s O",W3C:"Y-m-dTH:i:sP"},l=function(e){return -1!==Object.values(d).indexOf(e)};function f(e,t,o){this.date=e,this.desc=t,this.style=o}e.extend(e.datetimepicker,d),r(),window.getComputedStyle||(window.getComputedStyle=function(e){return this.el=e,this.getPropertyValue=function(t){var o=/(-([a-z]))/g;return"float"===t&&(t="styleFloat"),o.test(t)&&(t=t.replace(o,function(e,t,o){return o.toUpperCase()})),e.currentStyle[t]||null},this}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var o,n;for(o=t||0,n=this.length;o<n;o+=1)if(this[o]===e)return o;return -1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},e.fn.xdsoftScroller=function(t,o){return this.each(function(){var n,a,i,r,s,d=e(this),l=function(e){var t,o={x:0,y:0};return"touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type?(t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],o.x=t.clientX,o.y=t.clientY):("mousedown"===e.type||"mouseup"===e.type||"mousemove"===e.type||"mouseover"===e.type||"mouseout"===e.type||"mouseenter"===e.type||"mouseleave"===e.type)&&(o.x=e.clientX,o.y=e.clientY),o},f=function(e){var t=0;return"detail"in e&&(t=e.detail),"wheelDelta"in e&&(t=-e.wheelDelta/120),"wheelDeltaY"in e&&(t=-e.wheelDeltaY/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=0),t*=10,"deltaY"in e&&(t=-e.deltaY),t&&e.deltaMode&&(1===e.deltaMode?t*=40:t*=800),t},c=0,u=100,m=!1,h=0,g=0,p=0,x=!1,$=0,D=function(){};if("hide"===o){d.find(".xdsoft_scrollbar").hide();return}e(this).hasClass("xdsoft_scroller_box")||(c=Math.abs(parseInt((n=d.children().eq(0)).css("marginTop"),10)),a=d[0].clientHeight,i=n[0].offsetHeight,r=e('<div class="xdsoft_scrollbar"></div>'),s=e('<div class="xdsoft_scroller"></div>'),r.append(s),d.addClass("xdsoft_scroller_box").append(r),D=function e(t){var o=l(t).y-h+$;o<0&&(o=0),o+s[0].offsetHeight>p&&(o=p-s[0].offsetHeight),d.trigger("scroll_element.xdsoft_scroller",[u?o/u:0])},s.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(n){a||d.trigger("resize_scroll.xdsoft_scroller",[o]),h=l(n).y,$=parseInt(s.css("marginTop"),10),p=r[0].offsetHeight,"mousedown"===n.type||"touchstart"===n.type?(t.ownerDocument&&e(t.ownerDocument.body).addClass("xdsoft_noselect"),e([t.ownerDocument.body,t.contentWindow]).on("touchend mouseup.xdsoft_scroller",function o(){e([t.ownerDocument.body,t.contentWindow]).off("touchend mouseup.xdsoft_scroller",o).off("mousemove.xdsoft_scroller",D).removeClass("xdsoft_noselect")}),e(t.ownerDocument.body).on("mousemove.xdsoft_scroller",D)):(x=!0,n.stopPropagation(),n.preventDefault())}).on("touchmove",function(e){x&&(e.preventDefault(),D(e))}).on("touchend touchcancel",function(){x=!1,$=0}),d.on("scroll_element.xdsoft_scroller",function(e,t){a||d.trigger("resize_scroll.xdsoft_scroller",[t,!0]),t=t>1?1:t<0||isNaN(t)?0:t,c=parseFloat(Math.abs((n[0].offsetHeight-a)*t).toFixed(4)),s.css("marginTop",u*t),n.css("marginTop",-c)}).on("resize_scroll.xdsoft_scroller",function(e,t,o){var l,f;f=(l=(a=d[0].clientHeight)/(i=n[0].offsetHeight))*r[0].offsetHeight,l>1?s.hide():(s.show(),s.css("height",parseInt(f>10?f:10,10)),u=r[0].offsetHeight-s[0].offsetHeight,!0!==o&&d.trigger("scroll_element.xdsoft_scroller",[t||c/(i-a)]))}),d.on("mousewheel",function(e){var t=Math.max(0,c-f(e.originalEvent));return d.trigger("scroll_element.xdsoft_scroller",[t/(i-a)]),e.stopPropagation(),!1}),d.on("touchstart",function(e){m=l(e),g=c}),d.on("touchmove",function(e){if(m){e.preventDefault();var t=l(e);d.trigger("scroll_element.xdsoft_scroller",[(g-(t.y-m.y))/(i-a)])}}),d.on("touchend touchcancel",function(){m=!1,g=0})),d.trigger("resize_scroll.xdsoft_scroller",[o])})},e.fn.datetimepicker=function(n,i){var r,s,d=this,l=!1,c=!1,u=e.isPlainObject(n)||!n?e.extend(!0,{},t,n):e.extend(!0,{},t),m=0,h=function(e){e.on("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",function t(){!(e.is(":disabled")||e.data("xdsoft_datetimepicker"))&&(clearTimeout(m),m=setTimeout(function(){e.data("xdsoft_datetimepicker")||r(e),e.off("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",t).trigger("open.xdsoft")},100))})};return r=function(t){var i,r,s,d,c,m,h,g=e('<div class="xdsoft_datetimepicker xdsoft_noselect"></div>'),p=e('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),x=e('<div class="xdsoft_datepicker active"></div>'),$=e('<div class="xdsoft_monthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),D=e('<div class="xdsoft_calendar"></div>'),v=e('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),y=v.find(".xdsoft_time_box").eq(0),T=e('<div class="xdsoft_time_variant"></div>'),_=e('<button type="button" class="xdsoft_save_selected blue-gradient-button">Save Selected</button>'),w=e('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),b=e('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),k=!1,M=0;u.id&&g.attr("id",u.id),u.style&&g.attr("style",u.style),u.weeks&&g.addClass("xdsoft_showweeks"),u.rtl&&g.addClass("xdsoft_rtl"),g.addClass("xdsoft_"+u.theme),g.addClass(u.className),$.find(".xdsoft_month span").after(w),$.find(".xdsoft_year span").after(b),$.find(".xdsoft_month,.xdsoft_year").on("touchstart mousedown.xdsoft",function(t){var o,n,a=e(this).find(".xdsoft_select").eq(0),i=0,r=0,s=a.is(":visible");for($.find(".xdsoft_select").hide(),m.currentTime&&(i=m.currentTime[e(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),a[s?"hide":"show"](),o=a.find("div.xdsoft_option"),n=0;n<o.length&&o.eq(n).data("value")!==i;n+=1)r+=o[0].offsetHeight;return a.xdsoftScroller(u,r/(a.children()[0].offsetHeight-a[0].clientHeight)),t.stopPropagation(),!1});var S=function(e){var t=e.originalEvent,o=t.touches?t.touches[0]:t;this.touchStartPosition=this.touchStartPosition||o;var n=Math.abs(this.touchStartPosition.clientX-o.clientX),a=Math.abs(this.touchStartPosition.clientY-o.clientY);Math.sqrt(n*n+a*a)>u.touchMovedThreshold&&(this.touchMoved=!0)};function O(){var e,o=!1;return u.startDate?o=m.strToDate(u.startDate):(o=u.value||(t&&t.val&&t.val()?t.val():""))?(o=m.strToDateTime(o),u.yearOffset&&(o=new Date(o.getFullYear()-u.yearOffset,o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()))):u.defaultDate&&(o=m.strToDateTime(u.defaultDate),u.defaultTime&&(e=m.strtotime(u.defaultTime),o.setHours(e.getHours()),o.setMinutes(e.getMinutes()))),o&&m.isValidDate(o)?g.data("changed",!0):o="",o||0}function C(e){var n=function(e,t){return RegExp(e.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}")).test(t)},a=function(t,o){if(!(t="string"==typeof t||t instanceof String?e.ownerDocument.getElementById(t):t))return!1;if(t.createTextRange){var n=t.createTextRange();return n.collapse(!0),n.moveEnd("character",o),n.moveStart("character",o),n.select(),!0}return!!t.setSelectionRange&&(t.setSelectionRange(o,o),!0)};e.mask&&t.off("keydown.xdsoft"),!0===e.mask&&(o.formatMask?e.mask=o.formatMask(e.format):e.mask=e.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")),"string"==typeof e.mask&&(n(e.mask,t.val())||(t.val(e.mask.replace(/[0-9]/g,"_")),a(t[0],0)),t.on("paste.xdsoft",function(o){var i=(o.clipboardData||o.originalEvent.clipboardData||window.clipboardData).getData("text"),r=this.value,s=this.selectionStart,d=r.slice(0,s),l=r.slice(s+i.length);return r=d+i+l,s+=i.length,n(e.mask,r)?(this.value=r,a(this,s)):""===r.trim()?this.value=e.mask.replace(/[0-9]/g,"_"):t.trigger("error_input.xdsoft"),o.preventDefault(),!1}),t.on("keydown.xdsoft",function(o){var i,r=this.value,s=o.which,d=this.selectionStart,f=this.selectionEnd,c=d!==f;if(s>=48&&s<=57||s>=96&&s<=105||8===s||46===s){for(i=8===s||46===s?"_":String.fromCharCode(96<=s&&s<=105?s-48:s),8===s&&d&&!c&&(d-=1);;){var u=e.mask.slice(d,d+1),m=d<e.mask.length,h=d>0;if(!(/[^0-9_]/.test(u)&&m&&h))break;d+=8!==s||c?1:-1}if(o.metaKey&&(d=0,c=!0),c){var g,p=f-d,x=e.mask.replace(/[0-9]/g,"_"),$=x.slice(d,d+p).slice(1),D=r.slice(0,d);r=D+(i+$)+r.slice(d+p)}else{var v,y=r.slice(0,d);r=y+i+r.slice(d+1)}if(""===r.trim())r=x;else if(d===e.mask.length)return o.preventDefault(),!1;for(d+=8===s?0:1;/[^0-9_]/.test(e.mask.slice(d,d+1))&&d<e.mask.length&&d>0;)d+=8===s?0:1;n(e.mask,r)?(this.value=r,a(this,d)):""===r.trim()?this.value=e.mask.replace(/[0-9]/g,"_"):t.trigger("error_input.xdsoft")}else if(-1!==[65,67,86,90,89].indexOf(s)&&l||-1!==[27,38,40,37,39,116,17,9,13].indexOf(s))return!0;return o.preventDefault(),!1}))}$.find(".xdsoft_select").xdsoftScroller(u).on("touchstart mousedown.xdsoft",function(e){var t=e.originalEvent;this.touchMoved=!1,this.touchStartPosition=t.touches?t.touches[0]:t,e.stopPropagation(),e.preventDefault()}).on("touchmove",".xdsoft_option",S).on("touchend mousedown.xdsoft",".xdsoft_option",function(){if(!this.touchMoved){(void 0===m.currentTime||null===m.currentTime)&&(m.currentTime=m.now());var t=m.currentTime.getFullYear();m&&m.currentTime&&m.currentTime[e(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](e(this).data("value")),e(this).parent().parent().hide(),g.trigger("xchange.xdsoft"),u.onChangeMonth&&"function"==typeof u.onChangeMonth&&u.onChangeMonth.call(g,m.currentTime,g.data("input")),t!==m.currentTime.getFullYear()&&"function"==typeof u.onChangeYear&&u.onChangeYear.call(g,m.currentTime,g.data("input"))}}),g.getValue=function(){return m.getCurrentTime()},g.setOptions=function(n){var a={};u=e.extend(!0,{},u,n),n.allowTimes&&Array.isArray(n.allowTimes)&&n.allowTimes.length&&(u.allowTimes=e.extend(!0,[],n.allowTimes)),n.weekends&&Array.isArray(n.weekends)&&n.weekends.length&&(u.weekends=e.extend(!0,[],n.weekends)),n.allowDates&&Array.isArray(n.allowDates)&&n.allowDates.length&&(u.allowDates=e.extend(!0,[],n.allowDates)),n.allowDateRe&&"[object String]"===Object.prototype.toString.call(n.allowDateRe)&&(u.allowDateRe=RegExp(n.allowDateRe)),n.highlightedDates&&Array.isArray(n.highlightedDates)&&n.highlightedDates.length&&(e.each(n.highlightedDates,function(t,n){var i,r=e.map(n.split(","),e.trim),s=new f(o.parseDate(r[0],u.formatDate),r[1],r[2]),d=o.formatDate(s.date,u.formatDate);void 0!==a[d]?(i=a[d].desc)&&i.length&&s.desc&&s.desc.length&&(a[d].desc=i+"\n"+s.desc):a[d]=s}),u.highlightedDates=e.extend(!0,[],a)),n.highlightedPeriods&&Array.isArray(n.highlightedPeriods)&&n.highlightedPeriods.length&&(a=e.extend(!0,[],u.highlightedDates),e.each(n.highlightedPeriods,function(t,n){var i,r,s,d,l,c,m;if(Array.isArray(n))i=n[0],r=n[1],s=n[2],m=n[3];else{var h=e.map(n.split(","),e.trim);i=o.parseDate(h[0],u.formatDate),r=o.parseDate(h[1],u.formatDate),s=h[2],m=h[3]}for(;i<=r;)d=new f(i,s,m),l=o.formatDate(i,u.formatDate),i.setDate(i.getDate()+1),void 0!==a[l]?(c=a[l].desc)&&c.length&&d.desc&&d.desc.length&&(a[l].desc=c+"\n"+d.desc):a[l]=d}),u.highlightedDates=e.extend(!0,[],a)),n.disabledDates&&Array.isArray(n.disabledDates)&&n.disabledDates.length&&(u.disabledDates=e.extend(!0,[],n.disabledDates)),n.disabledWeekDays&&Array.isArray(n.disabledWeekDays)&&n.disabledWeekDays.length&&(u.disabledWeekDays=e.extend(!0,[],n.disabledWeekDays)),(u.open||u.opened)&&!u.inline&&t.trigger("open.xdsoft"),u.inline&&(k=!0,g.addClass("xdsoft_inline"),t.after(g).hide()),u.inverseButton&&(u.next="xdsoft_prev",u.prev="xdsoft_next"),u.datepicker?x.addClass("active"):x.removeClass("active"),u.timepicker?v.addClass("active"):v.removeClass("active"),u.value&&(m.setCurrentTime(u.value),t&&t.val&&t.val(m.str)),isNaN(u.dayOfWeekStart)?u.dayOfWeekStart=0:u.dayOfWeekStart=parseInt(u.dayOfWeekStart,10)%7,u.timepickerScrollbar||y.xdsoftScroller(u,"hide"),u.minDate&&/^[\+\-](.*)$/.test(u.minDate)&&(u.minDate=o.formatDate(m.strToDateTime(u.minDate),u.formatDate)),u.maxDate&&/^[\+\-](.*)$/.test(u.maxDate)&&(u.maxDate=o.formatDate(m.strToDateTime(u.maxDate),u.formatDate)),u.minDateTime&&/^\+(.*)$/.test(u.minDateTime)&&(u.minDateTime=m.strToDateTime(u.minDateTime).dateFormat(u.formatDate)),u.maxDateTime&&/^\+(.*)$/.test(u.maxDateTime)&&(u.maxDateTime=m.strToDateTime(u.maxDateTime).dateFormat(u.formatDate)),_.toggle(u.showApplyButton),$.find(".xdsoft_today_button").css("visibility",u.todayButton?"visible":"hidden"),$.find("."+u.prev).css("visibility",u.prevButton?"visible":"hidden"),$.find("."+u.next).css("visibility",u.nextButton?"visible":"hidden"),C(u),u.validateOnBlur&&t.off("blur.xdsoft").on("blur.xdsoft",function(){if(u.allowBlank&&(!e(this).val().trim().length||"string"==typeof u.mask&&e(this).val().trim()===u.mask.replace(/[0-9]/g,"_")))e(this).val(null),g.data("xdsoft_datetime").empty();else{var t=o.parseDate(e(this).val(),u.format);if(t)e(this).val(o.formatDate(t,u.format));else{var n=+[e(this).val()[0],e(this).val()[1]].join(""),a=+[e(this).val()[2],e(this).val()[3]].join("");!u.datepicker&&u.timepicker&&n>=0&&n<24&&a>=0&&a<60?e(this).val([n,a].map(function(e){return e>9?e:"0"+e}).join(":")):e(this).val(o.formatDate(m.now(),u.format))}g.data("xdsoft_datetime").setCurrentTime(e(this).val())}g.trigger("changedatetime.xdsoft"),g.trigger("close.xdsoft")}),u.dayOfWeekStartPrev=0===u.dayOfWeekStart?6:u.dayOfWeekStart-1,g.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},g.data("options",u).on("touchstart mousedown.xdsoft",function(e){return e.stopPropagation(),e.preventDefault(),b.hide(),w.hide(),!1}),y.append(T),y.xdsoftScroller(u),g.on("afterOpen.xdsoft",function(){y.xdsoftScroller(u)}),g.append(x).append(v),!0!==u.withoutCopyright&&g.append(p),x.append($).append(D).append(_),u.insideParent?e(t).parent().append(g):e(u.parentID).append(g),m=new(i=function(){var e=this;e.now=function(t){var o,n,a=new Date;return!t&&u.defaultDate&&(o=e.strToDateTime(u.defaultDate),a.setFullYear(o.getFullYear()),a.setMonth(o.getMonth()),a.setDate(o.getDate())),a.setFullYear(a.getFullYear()),!t&&u.defaultTime&&(n=e.strtotime(u.defaultTime),a.setHours(n.getHours()),a.setMinutes(n.getMinutes()),a.setSeconds(n.getSeconds()),a.setMilliseconds(n.getMilliseconds())),a},e.isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},e.setCurrentTime=function(t,o){"string"==typeof t?e.currentTime=e.strToDateTime(t):e.isValidDate(t)?e.currentTime=t:t||o||!u.allowBlank||u.inline?e.currentTime=e.now():e.currentTime=null,g.trigger("xchange.xdsoft")},e.empty=function(){e.currentTime=null},e.getCurrentTime=function(){return e.currentTime},e.nextMonth=function(){(void 0===e.currentTime||null===e.currentTime)&&(e.currentTime=e.now());var t,o=e.currentTime.getMonth()+1;return 12===o&&(e.currentTime.setFullYear(e.currentTime.getFullYear()+1),o=0),t=e.currentTime.getFullYear(),e.currentTime.setDate(Math.min(new Date(e.currentTime.getFullYear(),o+1,0).getDate(),e.currentTime.getDate())),e.currentTime.setMonth(o),u.onChangeMonth&&"function"==typeof u.onChangeMonth&&u.onChangeMonth.call(g,m.currentTime,g.data("input")),t!==e.currentTime.getFullYear()&&"function"==typeof u.onChangeYear&&u.onChangeYear.call(g,m.currentTime,g.data("input")),g.trigger("xchange.xdsoft"),o},e.prevMonth=function(){(void 0===e.currentTime||null===e.currentTime)&&(e.currentTime=e.now());var t=e.currentTime.getMonth()-1;return -1===t&&(e.currentTime.setFullYear(e.currentTime.getFullYear()-1),t=11),e.currentTime.setDate(Math.min(new Date(e.currentTime.getFullYear(),t+1,0).getDate(),e.currentTime.getDate())),e.currentTime.setMonth(t),u.onChangeMonth&&"function"==typeof u.onChangeMonth&&u.onChangeMonth.call(g,m.currentTime,g.data("input")),g.trigger("xchange.xdsoft"),t},e.getWeekOfYear=function(e){if(u.onGetWeekOfYear&&"function"==typeof u.onGetWeekOfYear){var t=u.onGetWeekOfYear.call(g,e);if(void 0!==t)return t}var o=new Date(e.getFullYear(),0,1);return 4!==o.getDay()&&o.setMonth(0,1+(4-o.getDay()+7)%7),Math.ceil(((e-o)/864e5+o.getDay()+1)/7)},e.strToDateTime=function(t){var n,a,i=[];return t&&t instanceof Date&&e.isValidDate(t)?t:((i=/^([+-]{1})(.*)$/.exec(t))&&(i[2]=o.parseDate(i[2],u.formatDate)),i&&i[2]?(n=i[2].getTime()-6e4*i[2].getTimezoneOffset(),a=new Date(e.now(!0).getTime()+parseInt(i[1]+"1",10)*n)):a=t?o.parseDate(t,u.format):e.now(),e.isValidDate(a)||(a=e.now()),a)},e.strToDate=function(t){if(t&&t instanceof Date&&e.isValidDate(t))return t;var n=t?o.parseDate(t,u.formatDate):e.now(!0);return e.isValidDate(n)||(n=e.now(!0)),n},e.strtotime=function(t){if(t&&t instanceof Date&&e.isValidDate(t))return t;var n=t?o.parseDate(t,u.formatTime):e.now(!0);return e.isValidDate(n)||(n=e.now(!0)),n},e.str=function(){var t=u.format;return u.yearOffset&&(t=(t=t.replace("Y",e.currentTime.getFullYear()+u.yearOffset)).replace("y",String(e.currentTime.getFullYear()+u.yearOffset).substring(2,4))),o.formatDate(e.currentTime,t)},e.currentTime=this.now()}),_.on("touchend click",function(e){e.preventDefault(),g.data("changed",!0),m.setCurrentTime(O()),t.val(m.str()),g.trigger("close.xdsoft")}),$.find(".xdsoft_today_button").on("touchend mousedown.xdsoft",function(){g.data("changed",!0),m.setCurrentTime(0,!0),g.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){var e,o,n=m.getCurrentTime();if(n=new Date(n.getFullYear(),n.getMonth(),n.getDate()),e=m.strToDate(u.minDate),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),!(n<e))o=m.strToDate(u.maxDate),o=new Date(o.getFullYear(),o.getMonth(),o.getDate()),!(n>o)&&(t.val(m.str()),t.trigger("change"),g.trigger("close.xdsoft"))}),$.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var t=e(this),o=0,n=!1;(function e(a){t.hasClass(u.next)?m.nextMonth():t.hasClass(u.prev)&&m.prevMonth(),u.monthChangeSpinner&&!n&&(o=setTimeout(e,500))})(500),e([u.ownerDocument.body,u.contentWindow]).on("touchend mouseup.xdsoft",function t(){clearTimeout(o),n=!0,e([u.ownerDocument.body,u.contentWindow]).off("touchend mouseup.xdsoft",t)})}),v.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var t=e(this),o=0,n=!1,a=110;(function e(i){var r=y[0].clientHeight,s=T[0].offsetHeight,d=Math.abs(parseInt(T.css("marginTop"),10));d<u.timeHeightInTimePicker?d=u.timeHeightInTimePicker:t.hasClass(u.next)&&s-r<d&&T.css("marginTop","-"+s+"px"),t.hasClass(u.next)&&s-r>d?T.css("marginTop","-"+(d+u.timeHeightInTimePicker)+"px"):t.hasClass(u.prev)&&d-u.timeHeightInTimePicker>=0&&T.css("marginTop","-"+(d-u.timeHeightInTimePicker)+"px"),y.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(T[0].style.marginTop,10)/(s-r))]),a=a>10?10:a-10,n||(o=setTimeout(e,500))})(500),e([u.ownerDocument.body,u.contentWindow]).on("touchend mouseup.xdsoft",function t(){clearTimeout(o),n=!0,e([u.ownerDocument.body,u.contentWindow]).off("touchend mouseup.xdsoft",t)})}),r=0,g.on("xchange.xdsoft",function(i){clearTimeout(r),r=setTimeout(function(){(void 0===m.currentTime||null===m.currentTime||isNaN(m.currentTime.getTime()))&&(m.currentTime=m.now());for(var i,r,s,d,l,f,c,h,p,x,v,y,_="",k=new Date(m.currentTime.getFullYear(),m.currentTime.getMonth(),1,12,0,0),M=0,S=m.now(),O=!1,C=!1,Y=!1,W=!1,H=[],F=!0,P="";k.getDay()!==u.dayOfWeekStart;)k.setDate(k.getDate()-1);for(_+="<table><thead><tr>",u.weeks&&(_+="<th></th>"),r=0;r<7;r+=1)_+="<th>"+u.i18n[a].dayOfWeekShort[(r+u.dayOfWeekStart)%7]+"</th>";for(_+="</tr></thead>",_+="<tbody>",!1!==u.maxDate&&(O=m.strToDate(u.maxDate),O=new Date(O.getFullYear(),O.getMonth(),O.getDate(),23,59,59,999)),!1!==u.minDate&&(C=m.strToDate(u.minDate),C=new Date(C.getFullYear(),C.getMonth(),C.getDate())),!1!==u.minDateTime&&(Y=m.strToDate(u.minDateTime),Y=new Date(Y.getFullYear(),Y.getMonth(),Y.getDate(),Y.getHours(),Y.getMinutes(),Y.getSeconds())),!1!==u.maxDateTime&&(W=m.strToDate(u.maxDateTime),W=new Date(W.getFullYear(),W.getMonth(),W.getDate(),W.getHours(),W.getMinutes(),W.getSeconds())),!1!==W&&(i=(12*W.getFullYear()+W.getMonth())*31+W.getDate());M<m.currentTime.countDaysInMonth()||k.getDay()!==u.dayOfWeekStart||m.currentTime.getMonth()===k.getMonth();){H=[],M+=1,d=k.getDay(),l=k.getDate(),f=k.getFullYear(),c=k.getMonth(),h=m.getWeekOfYear(k),y="",H.push("xdsoft_date"),p=u.beforeShowDay&&"function"==typeof u.beforeShowDay.call?u.beforeShowDay.call(g,k):null,u.allowDateRe&&"[object RegExp]"===Object.prototype.toString.call(u.allowDateRe)&&!u.allowDateRe.test(o.formatDate(k,u.formatDate))&&H.push("xdsoft_disabled"),u.allowDates&&u.allowDates.length>0&&-1===u.allowDates.indexOf(o.formatDate(k,u.formatDate))&&H.push("xdsoft_disabled");var A=(12*k.getFullYear()+k.getMonth())*31+k.getDate();(!1!==O&&k>O||!1!==Y&&k<Y||!1!==C&&k<C||!1!==W&&A>i||p&&!1===p[0])&&H.push("xdsoft_disabled"),-1!==u.disabledDates.indexOf(o.formatDate(k,u.formatDate))&&H.push("xdsoft_disabled"),-1!==u.disabledWeekDays.indexOf(d)&&H.push("xdsoft_disabled"),t.is("[disabled]")&&H.push("xdsoft_disabled"),p&&""!==p[1]&&H.push(p[1]),m.currentTime.getMonth()!==c&&H.push("xdsoft_other_month"),(u.defaultSelect||g.data("changed"))&&o.formatDate(m.currentTime,u.formatDate)===o.formatDate(k,u.formatDate)&&H.push("xdsoft_current"),o.formatDate(S,u.formatDate)===o.formatDate(k,u.formatDate)&&H.push("xdsoft_today"),(0===k.getDay()||6===k.getDay()||-1!==u.weekends.indexOf(o.formatDate(k,u.formatDate)))&&H.push("xdsoft_weekend"),void 0!==u.highlightedDates[o.formatDate(k,u.formatDate)]&&(s=u.highlightedDates[o.formatDate(k,u.formatDate)],H.push(void 0===s.style?"xdsoft_highlighted_default":s.style),y=void 0===s.desc?"":s.desc),u.beforeShowDay&&"function"==typeof u.beforeShowDay&&H.push(u.beforeShowDay(k)),F&&(_+="<tr>",F=!1,u.weeks&&(_+="<th>"+h+"</th>")),_+='<td data-date="'+l+'" data-month="'+c+'" data-year="'+f+'" class="xdsoft_date xdsoft_day_of_week'+k.getDay()+" "+H.join(" ")+'" title="'+y+'"><div>'+l+"</div></td>",k.getDay()===u.dayOfWeekStartPrev&&(_+="</tr>",F=!0),k.setDate(l+1)}_+="</tbody></table>",D.html(_),$.find(".xdsoft_label span").eq(0).text(u.i18n[a].months[m.currentTime.getMonth()]),$.find(".xdsoft_label span").eq(1).text(m.currentTime.getFullYear()+u.yearOffset),P="",x="",c="";var I=0;if(!1!==u.minTime){var R=m.strtotime(u.minTime);I=60*R.getHours()+R.getMinutes()}var j=1440;if(!1!==u.maxTime){var R=m.strtotime(u.maxTime);j=60*R.getHours()+R.getMinutes()}if(!1!==u.minDateTime){var R=m.strToDateTime(u.minDateTime);if(o.formatDate(m.currentTime,u.formatDate)===o.formatDate(R,u.formatDate)){var c=60*R.getHours()+R.getMinutes();c>I&&(I=c)}}if(!1!==u.maxDateTime){var R=m.strToDateTime(u.maxDateTime);if(o.formatDate(m.currentTime,u.formatDate)===o.formatDate(R,u.formatDate)){var c=60*R.getHours()+R.getMinutes();c<j&&(j=c)}}if(v=function e(n,a){var i,r=m.now(),s=u.allowTimes&&Array.isArray(u.allowTimes)&&u.allowTimes.length;r.setHours(n),n=parseInt(r.getHours(),10),r.setMinutes(a),a=parseInt(r.getMinutes(),10),H=[];var d=60*n+a;(t.is("[disabled]")||d>=j||d<I)&&H.push("xdsoft_disabled"),(i=new Date(m.currentTime)).setHours(parseInt(m.currentTime.getHours(),10)),s||i.setMinutes(Math[u.roundTime](m.currentTime.getMinutes()/u.step)*u.step),(u.initTime||u.defaultSelect||g.data("changed"))&&i.getHours()===parseInt(n,10)&&(!s&&u.step>59||i.getMinutes()===parseInt(a,10))&&(u.defaultSelect||g.data("changed")?H.push("xdsoft_current"):u.initTime&&H.push("xdsoft_init_time")),parseInt(S.getHours(),10)===parseInt(n,10)&&parseInt(S.getMinutes(),10)===parseInt(a,10)&&H.push("xdsoft_today"),P+='<div class="xdsoft_time '+H.join(" ")+'" data-hour="'+n+'" data-minute="'+a+'">'+o.formatDate(r,u.formatTime)+"</div>"},u.allowTimes&&Array.isArray(u.allowTimes)&&u.allowTimes.length)for(M=0;M<u.allowTimes.length;M+=1)v(x=m.strtotime(u.allowTimes[M]).getHours(),c=m.strtotime(u.allowTimes[M]).getMinutes());else for(M=0,r=0;M<(u.hours12?12:24);M+=1)for(r=0;r<60;r+=u.step){var z=60*M+r;!(z<I)&&(z>=j||v(x=(M<10?"0":"")+M,c=(r<10?"0":"")+r))}for(T.html(P),n="",M=parseInt(u.yearStart,10);M<=parseInt(u.yearEnd,10);M+=1)n+='<div class="xdsoft_option '+(m.currentTime.getFullYear()===M?"xdsoft_current":"")+'" data-value="'+M+'">'+(M+u.yearOffset)+"</div>";for(b.children().eq(0).html(n),M=parseInt(u.monthStart,10),n="";M<=parseInt(u.monthEnd,10);M+=1)n+='<div class="xdsoft_option '+(m.currentTime.getMonth()===M?"xdsoft_current":"")+'" data-value="'+M+'">'+u.i18n[a].months[M]+"</div>";w.children().eq(0).html(n),e(g).trigger("generate.xdsoft")},10),i.stopPropagation()}).on("afterOpen.xdsoft",function(){if(u.timepicker){var e,t,o,n;T.find(".xdsoft_current").length?e=".xdsoft_current":T.find(".xdsoft_init_time").length&&(e=".xdsoft_init_time"),e?(t=y[0].clientHeight,(o=T[0].offsetHeight)-t<(n=T.find(e).index()*u.timeHeightInTimePicker+1)&&(n=o-t),y.trigger("scroll_element.xdsoft_scroller",[parseInt(n,10)/(o-t)])):y.trigger("scroll_element.xdsoft_scroller",[0])}}),s=0,D.on("touchend click.xdsoft","td",function(o){o.stopPropagation(),s+=1;var n=e(this),a=m.currentTime;if(null==a&&(m.currentTime=m.now(),a=m.currentTime),n.hasClass("xdsoft_disabled"))return!1;a.setDate(1),a.setFullYear(n.data("year")),a.setMonth(n.data("month")),a.setDate(n.data("date")),g.trigger("select.xdsoft",[a]),t.val(m.str()),u.onSelectDate&&"function"==typeof u.onSelectDate&&u.onSelectDate.call(g,m.currentTime,g.data("input"),o),g.data("changed",!0),g.trigger("xchange.xdsoft"),g.trigger("changedatetime.xdsoft"),!(s>1)&&!0!==u.closeOnDateSelect&&(!1!==u.closeOnDateSelect||u.timepicker)||u.inline||g.trigger("close.xdsoft"),setTimeout(function(){s=0},200)}),T.on("touchstart","div",function(e){this.touchMoved=!1}).on("touchmove","div",S).on("touchend click.xdsoft","div",function(t){if(!this.touchMoved){t.stopPropagation();var o=e(this),n=m.currentTime;if(null==n&&(m.currentTime=m.now(),n=m.currentTime),o.hasClass("xdsoft_disabled"))return!1;n.setHours(o.data("hour")),n.setMinutes(o.data("minute")),g.trigger("select.xdsoft",[n]),g.data("input").val(m.str()),u.onSelectTime&&"function"==typeof u.onSelectTime&&u.onSelectTime.call(g,m.currentTime,g.data("input"),t),g.data("changed",!0),g.trigger("xchange.xdsoft"),g.trigger("changedatetime.xdsoft"),!0!==u.inline&&!0===u.closeOnTimeSelect&&g.trigger("close.xdsoft")}}),x.on("mousewheel.xdsoft",function(e){return!u.scrollMonth||(e.deltaY<0?m.nextMonth():m.prevMonth(),!1)}),t.on("mousewheel.xdsoft",function(e){return!u.scrollInput||(!u.datepicker&&u.timepicker?((d=T.find(".xdsoft_current").length?T.find(".xdsoft_current").eq(0).index():0)+e.deltaY>=0&&d+e.deltaY<T.children().length&&(d+=e.deltaY),T.children().eq(d).length&&T.children().eq(d).trigger("mousedown"),!1):u.datepicker&&!u.timepicker?(x.trigger(e,[e.deltaY,e.deltaX,e.deltaY]),t.val&&t.val(m.str()),g.trigger("changedatetime.xdsoft"),!1):void 0)}),g.on("changedatetime.xdsoft",function(e){if(u.onChangeDateTime&&"function"==typeof u.onChangeDateTime){var t=g.data("input");u.onChangeDateTime.call(g,m.currentTime,t,e),delete u.value,t.trigger("change")}}).on("generate.xdsoft",function(){u.onGenerate&&"function"==typeof u.onGenerate&&u.onGenerate.call(g,m.currentTime,g.data("input")),k&&(g.trigger("afterOpen.xdsoft"),k=!1)}).on("click.xdsoft",function(e){e.stopPropagation()}),d=0,h=function(e,t){do if(!(e=e.parentNode)||!1===t(e))break;while("HTML"!==e.nodeName)},c=function(){var t,o,n,a,i,r,s,d,l,f,c,m,p;t=(d=g.data("input")).offset(),o=d[0],f="top",n=t.top+o.offsetHeight-1,a=t.left,i="absolute",l=e(u.contentWindow).width(),m=e(u.contentWindow).height(),p=e(u.contentWindow).scrollTop(),u.ownerDocument.documentElement.clientWidth-t.left<x.parent().outerWidth(!0)&&(a-=x.parent().outerWidth(!0)-o.offsetWidth),"rtl"===d.parent().css("direction")&&(a-=g.outerWidth()-d.outerWidth()),u.fixed?(n-=p,a-=e(u.contentWindow).scrollLeft(),i="fixed"):(s=!1,h(o,function(e){return null!==e&&("fixed"===u.contentWindow.getComputedStyle(e).getPropertyValue("position")?(s=!0,!1):void 0)}),s&&!u.insideParent?(i="fixed",n+g.outerHeight()>m+p?(f="bottom",n=m+p-t.top):n-=p):n+g[0].offsetHeight>m+p&&(n=t.top-g[0].offsetHeight+1),n<0&&(n=0),a+o.offsetWidth>l&&(a=l-o.offsetWidth)),h(r=g[0],function(e){var t;if("relative"===(t=u.contentWindow.getComputedStyle(e).getPropertyValue("position"))&&l>=e.offsetWidth)return a-=(l-e.offsetWidth)/2,!1}),c={position:i,left:u.insideParent?o.offsetLeft:a,top:"",bottom:""},u.insideParent?c[f]=o.offsetTop+o.offsetHeight:c[f]=n,g.css(c)},g.on("open.xdsoft",function(t){var o=!0;u.onShow&&"function"==typeof u.onShow&&(o=u.onShow.call(g,m.currentTime,g.data("input"),t)),!1!==o&&(g.show(),c(),e(u.contentWindow).off("resize.xdsoft",c).on("resize.xdsoft",c),u.closeOnWithoutClick&&e([u.ownerDocument.body,u.contentWindow]).on("touchstart mousedown.xdsoft",function t(){g.trigger("close.xdsoft"),e([u.ownerDocument.body,u.contentWindow]).off("touchstart mousedown.xdsoft",t)}))}).on("close.xdsoft",function(e){var t=!0;$.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide(),u.onClose&&"function"==typeof u.onClose&&(t=u.onClose.call(g,m.currentTime,g.data("input"),e)),!1===t||u.opened||u.inline||g.hide(),e.stopPropagation()}).on("toggle.xdsoft",function(){g.is(":visible")?g.trigger("close.xdsoft"):g.trigger("open.xdsoft")}).data("input",t),M=0,g.data("xdsoft_datetime",m),g.setOptions(u),m.setCurrentTime(O()),t.data("xdsoft_datetimepicker",g).on("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",function(){!(t.is(":disabled")||t.data("xdsoft_datetimepicker").is(":visible")&&u.closeOnInputClick)&&u.openOnFocus&&(clearTimeout(M),M=setTimeout(function(){!t.is(":disabled")&&(k=!0,m.setCurrentTime(O(),!0),u.mask&&C(u),g.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(t){var o,n=t.which;return -1!==[13].indexOf(n)&&u.enterLikeTab?(o=e("input:visible,textarea:visible,button:visible,a:visible"),g.trigger("close.xdsoft"),o.eq(o.index(this)+1).focus(),!1):-1!==[9].indexOf(n)?(g.trigger("close.xdsoft"),!0):void 0}).on("blur.xdsoft",function(){g.trigger("close.xdsoft")})},s=function(t){var o=t.data("xdsoft_datetimepicker");o&&(o.data("xdsoft_datetime",null),o.remove(),t.data("xdsoft_datetimepicker",null).off(".xdsoft"),e(u.contentWindow).off("resize.xdsoft"),e([u.contentWindow,u.ownerDocument.body]).off("mousedown.xdsoft touchstart"),t.unmousewheel&&t.unmousewheel())},e(u.ownerDocument).off("keydown.xdsoftctrl keyup.xdsoftctrl").off("keydown.xdsoftcmd keyup.xdsoftcmd").on("keydown.xdsoftctrl",function(e){17===e.keyCode&&(l=!0)}).on("keyup.xdsoftctrl",function(e){17===e.keyCode&&(l=!1)}).on("keydown.xdsoftcmd",function(e){91===e.keyCode&&(c=!0)}).on("keyup.xdsoftcmd",function(e){91===e.keyCode&&(c=!1)}),this.each(function(){var t,a=e(this).data("xdsoft_datetimepicker");if(a){if("string"==typeof n)switch(n){case"show":e(this).select().focus(),a.trigger("open.xdsoft");break;case"hide":a.trigger("close.xdsoft");break;case"toggle":a.trigger("toggle.xdsoft");break;case"destroy":s(e(this));break;case"reset":this.value=this.defaultValue,this.value&&a.data("xdsoft_datetime").isValidDate(o.parseDate(this.value,u.format))||a.data("changed",!1),a.data("xdsoft_datetime").setCurrentTime(this.value);break;case"validate":(t=a.data("input")).trigger("blur.xdsoft");break;default:a[n]&&"function"==typeof a[n]&&(d=a[n](i))}else a.setOptions(n);return 0}"string"!=typeof n&&(!u.lazyInit||u.open||u.inline?r(e(this)):h(e(this)))}),d},e.fn.datetimepicker.defaults=t};!function(e){"function"==typeof define&&define.amd?define(["jquery","jquery-mousewheel"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(datetimepickerFactory);
